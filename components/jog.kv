#: import Factory kivy.factory.Factory
#: import Keypad components.keypad

<LabelButton>:
  label: "label"
  format: "{}"
  value: 0
  orientation: "vertical"
  size_hint_x: 0.4
  Label:
    text: root.label
    text_size: self.size
    size_hint_y: 0.3
    font_size: 16
    color: app.display_color
    halign: 'left'
    valign: 'bottom'
  Button:
    background_color: 0.1, 0.1, 0.1, 1
    font_name: "fonts/Manrope-Bold.ttf"
    font_size: 48
    font_style: "bold"
    color: app.display_color
    text: root.format.format(root.value)
    text_size: self.size
    halign: 'left'
    valign: 'bottom'
    on_release: Factory.Keypad().show(root.release_function)
    disabled: app.in_motion


<Jog>:
  orientation: "vertical"
  canvas.before:
    Color:
      rgba: (0,0,0,1)
    Rectangle:
      pos: self.pos
      size: self.size
  BoxLayout:
    orientation: "horizontal"
    height: 80
    size_hint_y: None
    LabelButton:
      label: "Current Position (deg)"
      format: app.angle_format
      value: app.current_position
      release_function: app.set_current_position

    BoxLayout:
      canvas.before:
        Color:
          rgba: (0.3, 0.1, 0.1, 1)
        Rectangle:
          pos: self.pos
          size: self.size
      size_hint_x: None
      width: 160
      orientation: "vertical"
      Label:
        size_hint_y: 0.3
        text: "Motion Enable"
      Switch:
        active: app.motion_enable
        on_active: app.motion_enable = self.active

  BoxLayout:
    orientation: "horizontal"
    height: 80
    size_hint_y: None
    Button:
      font_name: "fonts/Font Awesome 6 Free-Solid-900.otf"
      text: "\uf068"
      font_size: 48
      font_style: "bold"
      background_color: [0.2, 0.8, 0.2, 1]
      width: 80
      size_hint_x: None
      on_press: app.jog_backward = True
      on_release: app.jog_backward = False
      disabled: app.in_motion

    LabelButton:
      label: "Accel (deg/s^2)"
      format: "{:+.2f}"
      value: app.jog_accel
      release_function: app.set_jog_accel
    LabelButton:
      label: "Speed (deg/s)"
      format: "{:+.2f}"
      value: app.jog_speed
      release_function: app.set_jog_speed
    Button:
      font_name: "fonts/Font Awesome 6 Free-Solid-900.otf"
      text: "\u002b"
      font_size: 48
      font_style: "bold"
      background_color: [0.2, 0.8, 0.2, 1]
      width: 80
      size_hint_x: None
      on_press: app.jog_forward = True
      on_release: app.jog_forward = False
      disabled: app.in_motion
